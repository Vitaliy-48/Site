{% extends "site/site_base.html" %}
{% block content %}
<div class="row justify-content-center">
  <div class="col-12 col-sm-8 col-md-6">
    <div class="card shadow-sm h-100">
      <img src="{{ url_for('static', filename=candle[4]) }}" class="card-img-top" alt="{{ candle[1] }}">
      <div class="card-body">
        <h5 class="card-title d-flex align-items-end gap-2">
          {{ candle[1] }}
          <span class="ms-2 fs-6">{{ _('–ö–æ–ª—ñ—Ä') }}:</span>
          <span id="color-name" class="ms-2 text-primary fw-semibold fs-6">–±—ñ–ª–∏–π</span>
        </h5>
        <p><strong>{{ _('–¶—ñ–Ω–∞') }}:</strong> {{ candle[2] }} {{ _('–≥—Ä–Ω') }}</p>
        <p><strong>{{ _('–§–æ—Ä–º–∞') }}:</strong> {{ candle[5] }}</p>
        <p>{{ candle[3] }}</p>

        <h6>{{ _('–û–±–µ—Ä—ñ—Ç—å –∫–æ–ª—ñ—Ä') }}:</h6>
        {% set colors = candle[6].split(",") if candle[6] else [] %}
        <form method="POST" action="{{ url_for('add_to_cart', candle_id=candle[0]) }}">
          <div class="d-flex flex-wrap gap-2 mb-3" id="color-options">
            {% for color in colors %}
              <input type="radio" class="btn-check" name="color" id="color{{ loop.index }}" value="{{ color|trim }}"
                     {% if loop.first %}checked{% endif %}>
              <label class="btn btn-outline-primary" for="color{{ loop.index }}">{{ color|trim }}</label>
            {% endfor %}

          </div>

          <h6>{{ _('–û–±–µ—Ä—ñ—Ç—å –∫—ñ–ª—å–∫—ñ—Å—Ç—å') }}:</h6>
          <div class="mb-3">
            <input type="number" name="quantity" class="form-control-sm" style="width: 50px;" value="1" min="1" required>
          </div>

          <div class="d-flex gap-2">
            <button type="submit" class="btn btn-success btn-sm">üõí {{ _('–î–æ–¥–∞—Ç–∏ –≤ –∫–æ—à–∏–∫') }}</button>
            <a href="{{ url_for('index') }}" class="btn btn-primary btn-sm">‚¨Ö {{ _('–ü–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ –∫–∞—Ç–∞–ª–æ–≥—É') }}</a>
          </div>

        </form>
      </div>
    </div>

<style>
.color-circle{display:inline-block;width:20px;height:20px;border-radius:50%;border:2px solid #333}
</style>
<script>
document.addEventListener("DOMContentLoaded",function(){
  const opts=document.querySelectorAll("#color-options input");
  const colorName = document.getElementById("color-name");
  opts.forEach(o=>o.addEventListener("change",function(){
    colorName.textContent=this.value;
  }));
});
</script>
{% endblock %}